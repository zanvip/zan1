<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>加载中...</title>
  <style>
    :root { --bg:#0b1020; --card:#121a2b; --text:#e8eefc; --muted:#a8b3cf; --accent:#4c8bf5; }
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--text)}
    .wrap{max-width:720px;margin:0 auto;padding:24px;text-align:center}
    .card{background:var(--card);padding:20px;border-radius:16px}
    .muted{color:var(--muted)}
    iframe{width:100%;height:80vh;border:none;display:none;}
  </style>
</head>
<body>
  <div class="wrap">
    <h2>加载中...</h2>
    <div class="card">
      <p class="muted">正在为您加载目标页面，请稍候...</p>
    </div>
  </div>
  <iframe id="targetFrame" src="" onload="onFrameLoad()"></iframe>

  <script>
    function b64urlToStr(input) {
      input = input.replace(/-/g, '+').replace(/_/g, '/');
      const pad = input.length % 4;
      if (pad) input += '='.repeat(4 - pad);
      try {
        return decodeURIComponent(escape(atob(input)));
      } catch(e) {
        try { return atob(input); } catch(e2) { return ''; }
      }
    }

    function getParam(name) {
      const url = new URL(location.href);
      return url.searchParams.get(name);
    }

    const enc = getParam('u') || '';
    const target = b64urlToStr(enc);

    if (target && /^https?:\/\//i.test(target)) {
      // 设置 iframe 的 src 为目标页面
      document.getElementById('targetFrame').src = target;
    } else {
      location.href = 'about:blank'; // 如果目标地址无效，跳转到空白页
    }

    // iframe 加载完成后隐藏加载提示和显示 iframe 内容
    function onFrameLoad() {
      // 隐藏加载提示和显示 iframe
      document.querySelector('h2').style.display = 'none';  // 隐藏 "加载中..."
      document.querySelector('.card').style.display = 'none';  // 隐藏提示文字
      document.getElementById('targetFrame').style.display = 'block';  // 显示 iframe
    }
  </script>
</body>
</html>
  </script>
</body>
</html>
