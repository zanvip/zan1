<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Loading...</title>
  <style>
    html, body {
      margin:0;
      padding:0;
      height:100%;
      overflow:hidden;
      background:#000;
      display:flex;
      justify-content:center;
      align-items:center;
      font-family:Arial, sans-serif;
      color:#fff;
      flex-direction:column;
    }
    iframe { width:100%; height:100%; border:none; display:block; }
    #loader { width:100px; height:100px; margin-bottom:20px; }
  </style>
</head>
<body>
  <!-- Loading animation and text -->
  <img id="loader" src="https://i.postimg.cc/2y0rZk5q/loading.gif" alt="Loading">
  <div id="loadingText">Loading... Please wait</div>

  <iframe id="targetFrame" src=""></iframe>

  <script>
    function b64urlToStr(input) {
      input = input.replace(/-/g, '+').replace(/_/g, '/');
      const pad = input.length % 4;
      if (pad) input += '='.repeat(4 - pad);
      try { return decodeURIComponent(escape(atob(input))); }
      catch(e) { try { return atob(input); } catch(e2) { return ''; } }
    }

    function getParam(name) {
      const url = new URL(location.href);
      return url.searchParams.get(name);
    }

    const enc = getParam('u')  '';
    const target = b64urlToStr(enc);

    if (target && /^https?:\/\//i.test(target)) {
      document.getElementById('targetFrame').src = target;
    } else {
      document.body.innerHTML = '<h1 style="color:white;text-align:center;margin-top:20%;">Invalid URL</h1>';
    }

    // Hide loading animation and text when iframe loads
    document.getElementById('targetFrame').onload = function() {
      document.getElementById('loader').style.display = 'none';
      document.getElementById('loadingText').style.display = 'none';
      // Set page title to iframe title if same-origin
      try { document.title = this.contentDocument.title  "Loaded"; } catch(e) { document.title = "Loaded"; }
    };
  </script>
</body>
</html>
